/* Philter v1.1.0 | (c) 2015 Liudas Dzisevicius | MIT License */
!function(r){"use strict";function t(r,t,i,l,a,s){return"drop-shadow"==t[0]?(r[0]=r[0]+t[0]+"("+t[1]+i+" "+t[2]+i+" "+t[3]+i+" rgba(0,0,0,"+.01*t[4]+")) ",t[5]&&t[6]&&t[7]&&t[8]?r[1]=r[1]+t[0]+"("+t[5]+i+" "+t[6]+i+" "+t[7]+i+" rgba(0,0,0,"+.01*t[8]+")) ":r[1]=r[1]+t[0]+"("+t[1]+i+" "+t[2]+i+" "+t[3]+i+" rgba(0,0,0,"+.01*t[4]+")) "):"svg"==t[0]?(r[0]=r[0]+"url("+i+t[1]+") ",t[2]?r[1]=r[1]+"url("+i+t[2]+") ":r[1]=r[1]+"url("+i+t[1]+") "):"color"==t[0]?(o.color=o.color+1,e(t[1],t[2],l,a,s),r[0]=r[0]+"url("+i+"color-"+o.color+") ",t[3]&&t[4]?(o.color=o.color+1,e(t[3],t[4],l,a,s),r[1]=r[1]+"url("+i+"color-"+o.color+") "):r[1]=r[1]+"url("+i+"color-"+o.color+") "):(r[0]=r[0]+t[0]+"("+t[1]+i+") ",t[2]?r[1]=r[1]+t[0]+"("+t[2]+i+") ":r[1]=r[1]+t[0]+"("+t[1]+i+") "),r}function e(t,e,i,l,a){r("#svg").length||(r("body").append('<div id="svg"></div>'),r("#svg").append('<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><defs></defs></svg>')),e=.01*e,r.ajax({url:a+"/philter/svg/color.svg",success:function(a){r(a).find("filter").attr("id","color-"+o.color),r(a).find("feFlood").attr({"flood-opacity":e,"flood-color":t,width:i,height:l});var s=(new XMLSerializer).serializeToString(a.documentElement);r("defs").append(s),r("#svg").html(r("#svg").html())},error:function(r,t,e){console.error(e)},async:!1})}var o=[];o.color=0,r.philter=function(e){e=r.extend({transitionTime:.5,url:"../js"},e);for(var o=["blur","grayscale","hue-rotate","saturate","sepia","contrast","invert","opacity","brightness","drop-shadow","svg","color"],i=[],l=["",""],a="<style>",s="",n=0;n<o.length;n++)r("[data-philter-"+o[n]+"]").each(function(){i.indexOf(this)<0&&i.push(this)});for(var n=0;n<i.length;n++){for(var c=0;c<o.length;c++){var d=i[n].getAttribute("data-philter-"+o[c]);if(d){s=s+"[data-philter-"+o[c]+'="'+d+'"]',d=d.split(" "),d.unshift(o[c]);var h=r(i[n]).width(),u=r(i[n]).height();switch(d[0]){case"blur":l=t(l,d,"px");break;case"hue-rotate":l=t(l,d,"deg");break;case"drop-shadow":l=t(l,d,"px");break;case"svg":l=t(l,d,"#");break;case"color":l=t(l,d,"#",h,u,e.url);break;default:l=t(l,d,"%")}}}a=a+s+"{filter:"+l[0]+";-webkit-filter:"+l[0]+";}",l[0]!=l[1]&&(a=a+s+":hover{filter:"+l[1]+";-webkit-filter:"+l[1]+";}"),l=["",""],s=""}a=a+"*{transition:filter "+e.transitionTime+"s,-webkit-filter "+e.transitionTime+"s;}</style>",r("head").append(a)}}(jQuery);
