/* Philter v1.1.1 | (c) 2015 Liudas Dzisevicius | MIT License */
!function(){"use strict";function t(){for(var t=0;t<this.filters.length;t++){if(this.options.tag)var e=document.querySelectorAll("[data-philter-"+this.filters[t]+"]");else var e=document.querySelectorAll("[data-"+this.filters[t]+"]");if(e)for(var r=0;r<e.length;r++)this.elements.indexOf(e[r])<0&&this.elements.push(e[r])}}function e(){for(var t=["",""],e=0;e<this.elements.length;e++){for(var i=0;i<this.filters.length;i++){if(this.options.tag)var s=this.elements[e].getAttribute("data-philter-"+this.filters[i]);else var s=this.elements[e].getAttribute("data-"+this.filters[i]);if(s){if(this.options.tag)var o="[data-philter-"+this.filters[i]+'="'+s+'"]';else var o="[data-"+this.filters[i]+'="'+s+'"]';""==this.transitionString?this.transitionString+=o:this.transitionString+=","+o,s=s.split(" "),s.unshift(this.filters[i]),t=r.call(this,t,s,n(s[0]))}}this.styleString+=o+"{filter:"+t[0]+";-webkit-filter:"+t[0]+";}",t[0]!=t[1]&&(this.styleString+=o+":hover{filter:"+t[1]+";-webkit-filter:"+t[1]+";}"),t=["",""],o=""}}function r(t,e,r){switch(e[0]){case"drop-shadow":t[0]=t[0]+e[0]+"("+e[1]+r+" "+e[2]+r+" "+e[3]+r+" rgba(0,0,0,"+.01*e[4]+")) ",e[5]&&e[6]&&e[7]&&e[8]?t[1]=t[1]+e[0]+"("+e[5]+r+" "+e[6]+r+" "+e[7]+r+" rgba(0,0,0,"+.01*e[8]+")) ":t[1]=t[1]+e[0]+"("+e[1]+r+" "+e[2]+r+" "+e[3]+r+" rgba(0,0,0,"+.01*e[4]+")) ";break;case"svg":t[0]=t[0]+"url("+r+e[1]+") ",e[2]?t[1]=t[1]+"url("+r+e[2]+") ":t[1]=t[1]+"url("+r+e[1]+") ";break;case"color":++this.filterCount.color,i.call(this,e[1],e[2]),t[0]=t[0]+"url("+r+"color-"+this.filterCount.color+") ",e[3]&&e[4]?(++this.filterCount.color,i.call(this,e[3],e[4]),t[1]=t[1]+"url("+r+"color-"+this.filterCount.color+") "):t[1]=t[1]+"url("+r+"color-"+this.filterCount.color+") ";break;case"vintage":0==this.filterCount["vintage-"+e[1]]&&s.call(this,e[1]),++this.filterCount["vintage-"+e[1]],t[0]=t[0]+"url("+r+"vintage-"+e[1]+") ",e[2]?(0==this.filterCount["vintage-"+e[2]]&&s.call(this,e[2]),++this.filterCount["vintage-"+e[1]],t[1]=t[1]+"url("+r+"vintage-"+e[2]+") "):t[1]=t[1]+"url("+r+"vintage-"+e[1]+") ";break;default:t[0]=t[0]+e[0]+"("+e[1]+r+") ",e[2]?t[1]=t[1]+e[0]+"("+e[2]+r+") ":t[1]=t[1]+e[0]+"("+e[1]+r+") "}return t}function i(t,e){var r=document.getElementById("svg");r||(r=document.createElement("div"),r.setAttribute("id","svg"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><defs></defs></svg>',document.body.appendChild(r),r=document.getElementById("svg")),e=.01*e;var i=new XMLHttpRequest;i.open("GET",this.options.url+"/svg/color.svg"),i.send(null),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var s=i.response;if(s){r.querySelector("defs").innerHTML+=s,r.querySelector("filter").setAttribute("id","color-"+this.filterCount.color);var n=r.querySelector("feFlood");o(n,{"flood-opacity":e,"flood-color":t})}else console.error(this.errors.falsePath)}else 404===i.status&&console.error(this.errors.falsePath)}.bind(this)}function s(t){var e=document.getElementById("svg");e||(e=document.createElement("div"),e.setAttribute("id","svg"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><defs></defs></svg>',document.body.appendChild(e),e=document.getElementById("svg"));var r=new XMLHttpRequest;r.open("GET",this.options.url+"/svg/vintage-"+t+".svg"),r.send(null),r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var t=r.response;t?e.querySelector("defs").innerHTML+=t:console.error(this.errors.falsePath)}else 404===r.status&&console.error(this.errors.falsePath)}.bind(this)}function n(t){var e={blur:"px","hue-rotate":"deg","drop-shadow":"px",svg:"#",color:"#",vintage:"#","default":"%"};switch(t){case"blur":return e[t];case"hue-rotate":return e[t];case"drop-shadow":return e[t];case"svg":return e[t];case"color":return e[t];case"vintage":return e[t];default:return e["default"]}}function o(t,e){for(var r in e)t.setAttribute(r,e[r])}function l(t,e){var r;for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}window.Philter=function(){var r={transitionTime:.5,url:"../js",tag:!0},i=document.createElement("style");this.errors={falsePath:"Philter Error: you probably didn't declare the right path to philter folder!"},this.filterCount={color:0,"vintage-1":0,"vintage-2":0,"vintage-3":0,"vintage-4":0,"vintage-5":0,"vintage-6":0},this.filters=["blur","grayscale","hue-rotate","saturate","sepia","contrast","invert","opacity","brightness","drop-shadow","svg","color","vintage"],this.elements=[],this.styleString="",this.transitionString="",arguments[0]&&"object"==typeof arguments[0]?this.options=l(r,arguments[0]):this.options=r,t.call(this),e.call(this),this.styleString+=this.transitionString+"{transition:filter "+this.options.transitionTime+"s,-webkit-filter "+this.options.transitionTime+"s;}",i.innerHTML=this.styleString,document.head.appendChild(i)}}();